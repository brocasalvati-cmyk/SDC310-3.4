<!DOCTYPE html>
<html>
<head>
    <title>Brosal3735 Wk 3 Performance Assessment</title>
    <style>
        body { font-family: sans-serif; padding: 20px; }
        form { border: 1px solid #ccc; padding: 15px; margin-bottom: 20px; width: 300px; }
        input { margin-bottom: 10px; display: block; width: 100%; }
        table { width: 100%; border-collapse: collapse; }
        th, td { border: 1px solid black; padding: 8px; text-align: left; }
    </style>
</head>
<body>

    <h1>Brosal3735 Wk 3 Performance Assessment</h1>

    <div id="entryForm">
        <input type="hidden" id="editIndex">
        <input type="text" id="name" placeholder="Name">
        <input type="date" id="dob">
        <input type="text" id="color" placeholder="Favorite Color">
        <input type="text" id="place" placeholder="Favorite Place">
        <input type="text" id="nickname" placeholder="Nickname">
        
        <button type="button" id="submitBtn" onclick="handleAction()">Add New</button>
    </div>

    <table id="myTable">
        <thead>
            <tr>
                <th>Name</th>
                <th>DOB</th>
                <th>Color</th>
                <th>Place</th>
                <th>Nickname</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody id="tableBody"></tbody>
    </table>

    <script>
        // Start with empty data or stored data
        let dataStore = JSON.parse(localStorage.getItem('wk3Data')) || [];

        function renderTable() {
            const tbody = document.getElementById('tableBody');
            tbody.innerHTML = ""; // Clear existing rows

            dataStore.forEach((item, index) => {
                const row = `<tr>
                    <td>${item.name}</td>
                    <td>${item.dob}</td>
                    <td>${item.color}</td>
                    <td>${item.place}</td>
                    <td>${item.nickname}</td>
                    <td>
                        <button onclick="editRow(${index})">Edit</button>
                        <button onclick="deleteRow(${index})">Delete</button>
                    </td>
                </tr>`;
                tbody.innerHTML += row;
            });

            // Save back to browser storage
            localStorage.setItem('wk3Data', JSON.stringify(dataStore));
        }

        function handleAction() {
            const nameInput = document.getElementById('name').value;
            const dobInput = document.getElementById('dob').value;
            const editIdx = document.getElementById('editIndex').value;

            if (!nameInput || !dobInput) {
                alert("Please fill in Name and DOB");
                return;
            }

            const newEntry = {
                name: nameInput,
                dob: dobInput,
                color: document.getElementById('color').value,
                place: document.getElementById('place').value,
                nickname: document.getElementById('nickname').value
            };

            if (editIdx === "") {
                // Add mode
                dataStore.push(newEntry);
            } else {
                // Update mode
                dataStore[editIdx] = newEntry;
                document.getElementById('editIndex').value = "";
                document.getElementById('submitBtn').innerText = "Add New";
            }

            // Clear inputs
            document.getElementById('name').value = "";
            document.getElementById('dob').value = "";
            document.getElementById('color').value = "";
            document.getElementById('place').value = "";
            document.getElementById('nickname').value = "";

            renderTable();
        }

        function deleteRow(index) {
            dataStore.splice(index, 1);
            renderTable();
        }

        function editRow(index) {
            const item = dataStore[index];
            document.getElementById('name').value = item.name;
            document.getElementById('dob').value = item.dob;
            document.getElementById('color').value = item.color;
            document.getElementById('place').value = item.place;
            document.getElementById('nickname').value = item.nickname;
            
            document.getElementById('editIndex').value = index;
            document.getElementById('submitBtn').innerText = "Update";
        }

        // Run this when the page first loads
        renderTable();
    </script>
</body>
</html>
